<!DOCTYPE html>

<html>
	<head>
	<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
	<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1' />
	<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
	<title>Pedal Power</title>
	<link rel="stylesheet" type="text/css" href="http://kthomas852.github.io/geog485/geog485.css">
	<link rel="icon" type="image/png" href="https://raw.githubusercontent.com/kthomas852/cycleplus/gh-pages/images/bike.png"/>
	<link rel="stylesheet" href="../theme/default/style.css" type="text/css">
    <link rel="stylesheet" href="style.css" type="text/css">
	<script type="text/javascript" src="http://openlayers.org/api/OpenLayers.js"></script>
	<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
	<script type="text/javascript" src="http://ecn.dev.virtualearth.net/mapcontrol/mapcontrol.ashx?v=6.2&mkt=en-us"></script>
	<script src="../OpenLayers.js"></script>
	<script type="text/javascript">        
	// define global variables
        var lon = -106.624899;
        var lat = 35.084506;
        var zoom = 13;
        var map;
	var gmap, bikeroutes, day, night, dd;                    // Google Maps Layers
	

        // =============== Initialization function ===================
        function init(){
            map = new OpenLayers.Map( 'map',{                
                controls: [
                        new OpenLayers.Control.Navigation({zoomWheelEnabled:false}),
                        new OpenLayers.Control.NavToolbar(),
                        new OpenLayers.Control.PanZoomBar(),
                        new OpenLayers.Control.LayerSwitcher({'ascending':false}),
                        new OpenLayers.Control.Permalink(),
                        new OpenLayers.Control.ScaleLine(),
                        new OpenLayers.Control.Permalink('permalink'),
                        new OpenLayers.Control.MousePosition(),
                        new OpenLayers.Control.OverviewMap(),
                        new OpenLayers.Control.KeyboardDefaults()
                    ],
                maxExtent: new OpenLayers.Bounds(
                -128 * 156543.0339,
                -128 * 156543.0339,
                128 * 156543.0339,
                128 * 156543.0339),
                maxResolution: 156543.0339,                
                units: 'm',
                projection: new OpenLayers.Projection("EPSG:900913"),
                displayProjection: new OpenLayers.Projection("EPSG:4326"),
            } );
            
            // ================= Google Maps ====================     
            bikeroutes = new OpenLayers.Layer.Vector("Bicycle Routes", {
                projection: map.displayProjection,
                strategies: [new OpenLayers.Strategy.Fixed()],
                protocol: new OpenLayers.Protocol.HTTP({
                    url: "https://raw.githubusercontent.com/kthomas852/geog485/gh-pages/BikeRoutes.kml",
                    format: new OpenLayers.Format.KML({
                        extractStyles: true,
                        extractAttributes: true
                    })
                })
            });
            
            day = new OpenLayers.Layer.Vector("Day Time Accidents", {
                projection: map.displayProjection,
                strategies: [new OpenLayers.Strategy.Fixed()],
                protocol: new OpenLayers.Protocol.HTTP({
                    url: "https://raw.githubusercontent.com/kthomas852/geog485/gh-pages/day.kml",
                    format: new OpenLayers.Format.KML({
                        extractStyles: true,
                        extractAttributes: true
                    })
                })
            });
            
            night = new OpenLayers.Layer.Vector("Night Time Accidents", {
                projection: map.displayProjection,
                strategies: [new OpenLayers.Strategy.Fixed()],
                protocol: new OpenLayers.Protocol.HTTP({
                    url: "https://raw.githubusercontent.com/kthomas852/geog485/gh-pages/night.kml",
                    format: new OpenLayers.Format.KML({
                        extractStyles: true,
                        extractAttributes: true
                    })
                })
            });
            
            dd = new OpenLayers.Layer.Vector("Accidents at Dusk & Dawn", {
                projection: map.displayProjection,
                strategies: [new OpenLayers.Strategy.Fixed()],
                protocol: new OpenLayers.Protocol.HTTP({
                    url: "https://raw.githubusercontent.com/kthomas852/geog485/gh-pages/d&d.kml",
                    format: new OpenLayers.Format.KML({
                        extractStyles: true,
                        extractAttributes: true
                    })
                })
            });
           
            gmap = new OpenLayers.Layer.Google(
                "Google Streets", // the default
                {sphericalMercator:true}
            );
            
            

            map.addLayers([gmap, bikeroutes, day, night, dd]);
            
            select = new OpenLayers.Control.SelectFeature(bikeroutes);
            
            
            map.setCenter(
                new OpenLayers.LonLat(lon, lat).transform(
                    new OpenLayers.Projection("EPSG:4326"),
                    map.getProjectionObject()
                ), zoom
            );
	  
            map.addControl(new OpenLayers.Control.LayerSwitcher() );
           
        }
        
       
        // =============== End of Initialization Function ============
    </script>
  </head>
  <body onLoad="init()">
	
 <div id='cssmenu'>
<ul>
   <li class='active'><a href='http://kthomas852.github.io/geog485/index.html'><span>Home</span></a></li>
   <li class='has-sub'><a href='http://kthomas852.github.io/geog485/GMV.html'><span>Danger Zones</span></a>
   <li class='has-sub'><a href='http://kthomas852.github.io/geog485/Ride.html'><span>Where to Ride</span></a>
   <li class='has-sub'><a href='http://kthomas852.github.io/geog485/Ref.html'><span>References</span></a></li>
   
   
   </div>
   
	<h2>Bicycle accident map showing bike routes and bicycle related<br>
	accidents by severity of injury</h2>
	<br>
    <img src="https://raw.githubusercontent.com/kthomas852/geog485/gh-pages/images/Legend.jpg" width="322" height="79">
    <div id="map"></div>
    
   

</body>
</html>
